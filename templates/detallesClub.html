{% extends 'estiloGeneral.html' %}
{% load static %}

{% block title %}Detalles del Club: {{ nombre }}{% endblock %}

{% block estilosExtra %}
<link rel="stylesheet" href="{% static 'css/detallesClub.css' %}">
{% endblock %}

{% block contenidoPrincipal %}

<main class="detalle-club">
    <h1>{{ nombre }}</h1>
    <div class="club-contenido">
        <img src="{{ imagenes.0 }}" alt="{{ nombre }}" class="club-imagen">
        <p>{{ descripcion }}</p>
    </div>

    <div class="submenu">
        <button onclick="mostrarSeccion('noticias')" class="submenu-button active" id="noticias-tab">Noticias</button>
        <button onclick="mostrarSeccion('miembros')" class="submenu-button" id="miembros-tab">Miembros</button>
        <button onclick="mostrarSeccion('chat')" class="submenu-button" id="chat-tab">Chat Grupal</button>
        <a href="{% url 'clubes' %}" class="submenu-button">Regresar</a>
    </div>

    <div id="noticias" class="contenido-seccion active">
        <h2>Publicaciones del Club</h2>
        <div class="lista-publicaciones">
            {% for publicacion in publicaciones %}
                <div class="publicacion">
                    <h3>{{ publicacion.titulo }}</h3>
                    <p>{{ publicacion.contenido }}</p>
                    <div class="imagenes-publicacion">
                        {% for img in publicacion.imagenes %}
                            <img src="{{ img }}" alt="Imagen de publicación" class="publicacion-img">
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <div id="miembros" class="contenido-seccion" style="display: none;">
        <h2>Miembros del Club</h2>
        <div class="lista-miembros">
            {% for miembro in miembros %}
                <div class="miembro">
                    <img src="{{ miembro.imagen }}" alt="{{ miembro.nombre }}" class="miembro-img">
                    <span>{{ miembro.nombre }}</span>
                </div>
            {% endfor %}
        </div>
    </div>

    <div id="chat" class="contenido-seccion" style="display: none;">
        <h2>Chat Grupal</h2>
        <div class="chat">
            <div class="chat-mensajes" id="chat-mensajes">
                <!-- Aquí se agregarán los mensajes del chat -->
            </div>
            <div class="chat-input">
                <input type="text" id="mensaje" placeholder="Escribe tu mensaje...">
                <button onclick="enviarMensaje()">Enviar</button>
            </div>
        </div>
    </div>
</main>

<script>
    function mostrarSeccion(seccion) {
        const secciones = document.querySelectorAll('.contenido-seccion');
        secciones.forEach(function (element) {
            element.style.display = 'none';
        });

        document.getElementById(seccion).style.display = 'block';

        const tabs = document.querySelectorAll('.submenu-button');
        tabs.forEach(function(tab) {
            tab.classList.remove('active');
        });
        document.getElementById(seccion + '-tab').classList.add('active');
    }

    document.addEventListener("DOMContentLoaded", function() {
        mostrarSeccion('noticias');
    });

    function enviarMensaje() {
        const mensajeInput = document.getElementById('mensaje');
        const mensajeTexto = mensajeInput.value;
        if (mensajeTexto) {
            const mensajesDiv = document.getElementById('chat-mensajes');
            const nuevoMensaje = document.createElement('div');
            nuevoMensaje.classList.add('chat-mensaje');
            nuevoMensaje.textContent = mensajeTexto;
            mensajesDiv.appendChild(nuevoMensaje);
            mensajeInput.value = ''; 
            mensajesDiv.scrollTop = mensajesDiv.scrollHeight; 
        }
    }
</script>
{% endblock %}